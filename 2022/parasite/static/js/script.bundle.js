!function(){"use strict";var e,t,i,n,o=function(){function e(){this.classNameActive="is-hidden"}return e.prototype.switchDOM=function(e){e.classList.toggle(this.classNameActive)},e}(),s=function(){function e(){this.ua=navigator.userAgent.toLowerCase()}return e.prototype.isIos=function(){return this.ua.indexOf("iphone")>=0||this.ua.indexOf("ipad")>=0||this.ua.indexOf("ipod")>=0},e.prototype.isMobile=function(){return!!this.ua.match(/iphone|ipad|android.+mobile/)},e}(),u=function(){function e(){this.classNameActive="is-hidden"}return e.prototype.play=function(e){e.play()},e.prototype.reset=function(e){e.currentTime=0},e}(),c=u,a=new o,l=new c,r=new s,f=function(){var e=this;this.isFocusing=!0,this.isTexting=!1,this.isYoucanflyTime=!1,this.timer=null,this.isIosFirstEnter=!0,this.isMobile=!1,this.isIos=!1,this.reset=function(){e.textarea.value=""},this.input=function(){if(!e.isYoucanflyTime)if(""===e.textarea.value){if(e.isIos&&e.isIosFirstEnter)return void(e.isIosFirstEnter=!1);console.log("blank youcanfly"),e.youcanflyVideoFunc(),e.isIosFirstEnter=!0}else e.textarea.value.toLowerCase().indexOf("sodaakari")>=0&&(console.log("soda youcanfly"),e.youcanflySodaFunc())},this.keydown=function(t){e.isFocusing&&("Enter"===t.key?e.isTexting&&(e.isTexting=!1,setTimeout((function(){e.textarea.value+="パラ\n"}),50)):e.isTexting=!0)},this.youcanflyVideoFunc=function(){e.isYoucanflyTime=!0,e.textarea.blur(),clearTimeout(e.timer),a.switchDOM(e.youcanfly),e.timer=setTimeout((function(){l.play(e.youcanflyVideoItem),a.switchDOM(e.youcanflyVideo)}),1e3)},this.youcanflySodaFunc=function(){e.isYoucanflyTime=!0,e.textarea.blur(),clearTimeout(e.timer),a.switchDOM(e.youcanfly),e.timer=setTimeout((function(){a.switchDOM(e.profile),e.reset()}),1e3)},this.profileCloseFunc=function(){a.switchDOM(e.profile),a.switchDOM(e.youcanfly),e.isYoucanflyTime=!1,e.textarea.focus(),setTimeout((function(){e.profileInner.scrollTop=0}),300)},this.disableYoucanflyTime=function(){e.isYoucanflyTime=!1},this.textarea=document.getElementById("main-textarea"),this.textarea.addEventListener("focus",(function(){e.isFocusing=!0})),this.textarea.addEventListener("blur",(function(){e.isFocusing=!1})),this.textarea.addEventListener("input",this.input,!1),this.isMobile=r.isMobile(),this.isMobile&&(this.isFocusing=!1),this.isIos=r.isIos(),this.isMobile?this.textarea.addEventListener("compositionend",(function(){setTimeout((function(){e.textarea.value+="パラ\n"}),100)})):window.addEventListener("keydown",this.keydown,!1),this.youcanfly=document.getElementById("youcanfly"),this.youcanflyVideo=document.getElementById("youcanfly-video"),this.youcanflyVideoItem=document.getElementById("youcanfly-video-item"),this.profile=document.getElementById("profile"),this.profileInner=document.getElementById("profile-inner"),document.getElementById("profile-close").addEventListener("click",(function(){e.profileCloseFunc()}))},d=new o,y=new s,m=new c,h=null;window.addEventListener("load",(function(){h=new f,e=document.getElementById("main-textarea"),t=document.getElementById("youcanfly"),i=document.getElementById("youcanfly-video"),(n=document.getElementById("youcanfly-video-item")).addEventListener("ended",(function(){d.switchDOM(t),d.switchDOM(i),e.focus(),m.reset(n),h.disableYoucanflyTime()})),y.isMobile()&&e.setAttribute("cols","30")}))}();